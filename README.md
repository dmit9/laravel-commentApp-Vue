# Система комментариев

Веб-приложение для управления комментариями с поддержкой древовидной структуры ответов.

## Основные возможности

### Комментарии и ответы
- Создание новых комментариев
- Ответы на существующие комментарии
- Древовидная структура ответов с визуальным отступом
- Поддержка изображений в комментариях
- Форматирование текста с помощью тегов [i], [strong], [code], [a]

### Пользователи
- Автоматическая регистрация пользователей при создании комментария
- Привязка комментариев к пользователям
- Возможность указать домашнюю страницу
- Аватары для пользователей

### Сортировка и навигация
- Сортировка комментариев по:
  - Имени пользователя
  - Email
  - Дате добавления
- Постраничная навигация (пагинация) для комментариев и ответов
- Возможность сворачивать/разворачивать ветки ответов

### Безопасность
- Защита от XSS-атак
- Валидация пользовательского ввода
- Защита от спама с помощью капчи
- Проверка уникальности имен пользователей

### Интерфейс
- Адаптивный дизайн
- Плавные анимации при взаимодействии
- Визуальная обратная связь (hover-эффекты)
- Удобная навигация по древовидной структуре

## Технический стек

### Frontend
- Vue.js 3
- Composition API
- Axios для HTTP-запросов
- CSS с использованием Flexbox

### Backend
- Laravel
- MySQL
- RESTful API
- Eloquent ORM

## Структура базы данных

### Таблица users
- ID пользователя
- Имя (уникальное)
- Email
- Домашняя страница (опционально)
- Метки времени создания и обновления

### Таблица comments
- ID комментария
- ID пользователя (внешний ключ)
- ID родительского комментария (для ответов)
- Текст комментария
- Путь к изображению (опционально)
- Метки времени создания и обновления

### Таблица captchas
- ID капчи
- Токен
- Текст
- Метки времени создания и обновления

## Требования к установке

1. PHP 8.0 или выше
2. MySQL 5.7 или выше
3. Composer
4. Node.js и npm

## Установка и настройка

1. Клонировать репозиторий:
```bash
git clone https://github.com/dmit9/laravel-commentApp-Vue.git
cd comment-app
```

2. Установить PHP-зависимости:
```bash
composer install
```

3. Установить JavaScript-зависимости:
```bash
npm install
```

4. Скопировать файл конфигурации:
```bash
cp .env.example .env
```

5. Сгенерировать ключ приложения:
```bash
php artisan key:generate
```

6. Настроить подключение к базе данных в файле `.env`:
```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=comment_app
DB_USERNAME=your_username
DB_PASSWORD=your_password
```

7. Выполнить миграции:
```bash
php artisan migrate
```

8. Создать символическую ссылку для хранения файлов:
```bash
php artisan storage:link
```

9. Собрать фронтенд:
```bash
npm run build
```

10. Запустить сервер разработки:
```bash
php artisan serve
```

## Развертывание на сервере

1. Убедитесь, что на сервере установлены все необходимые зависимости (PHP, MySQL, Composer, Node.js)

2. Клонируйте репозиторий на сервер:
```bash
git clone https://github.com/dmit9/laravel-commentApp-Vue.git
cd comment-app
```

3. Установите зависимости:
```bash
composer install --no-dev
npm install
npm run build
```

4. Настройте веб-сервер (Apache/Nginx) для работы с Laravel

5. Настройте права доступа:
```bash
chmod -R 775 storage bootstrap/cache
chown -R www-data:www-data storage bootstrap/cache
```

6. Настройте переменные окружения в файле `.env`

7. Выполните миграции:
```bash
php artisan migrate
```

8. Создайте символическую ссылку для хранения файлов:
```bash
php artisan storage:link
```

## Использование

1. Создание комментария:
   - Нажать кнопку "Написать комментарий"
   - Заполнить форму (имя, email, текст)
   - При желании добавить изображение
   - Ввести капчу
   - Отправить комментарий

2. Ответ на комментарий:
   - Нажать кнопку "Ответить" под нужным комментарием
   - Заполнить форму
   - Отправить ответ

3. Просмотр ответов:
   - Нажать "Развернуть ответы" для просмотра ветки ответов
   - Использовать пагинацию для навигации по ответам

4. Сортировка:
   - Использовать кнопки сортировки в шапке таблицы
   - Повторное нажатие меняет направление сортировки

## Лицензия

MIT
